# 条形码扫描功能使用说明

## 功能概述

本系统已支持通过扫描打印出来的入库单和出库单条形码，快速访问和录入订单信息。

## 功能特性

### 1. 入库单条形码扫描

**功能位置：** 入库单管理页面 (`/wms/order/receipt`)

**使用方法：**
1. 在入库单列表页面顶部，找到"扫描条形码"输入框
2. 使用条形码扫描器扫描打印出来的入库单条形码
3. 系统会自动识别并查找对应的入库单

**扫描后的行为：**
- **待入库状态（status=0）：** 自动跳转到该入库单的编辑页面，可以直接进行入库操作
- **已入库状态（status=1）：** 提示"已入库，无法编辑"，并在列表中高亮显示该订单
- **已作废状态（status=-1）：** 提示"已作废，无法编辑"，并在列表中高亮显示该订单
- **未找到订单：** 提示"未找到入库单"

### 2. 出库单条形码扫描

**功能位置：** 出库单管理页面 (`/wms/order/shipment`)

**使用方法：**
1. 在出库单列表页面顶部，找到"扫描条形码"输入框
2. 使用条形码扫描器扫描打印出来的出库单条形码
3. 系统会自动识别并查找对应的出库单

**扫描后的行为：**
- **待出库状态（status=0）：** 自动跳转到该出库单的编辑页面，可以直接进行出库操作
- **已出库状态（status=1）：** 提示"已出库，无法编辑"，并在列表中高亮显示该订单
- **已作废状态（status=-1）：** 提示"已作废，无法编辑"，并在列表中高亮显示该订单
- **未找到订单：** 提示"未找到出库单"

## 技术实现

### 条形码格式
- **类型：** CODE128
- **内容：** 入库单号（receiptOrderNo）或出库单号（shipmentOrderNo）
- **生成位置：** 打印入库单/出库单时自动生成

### 工作流程

```
1. 用户扫描条形码
   ↓
2. 条形码扫描器输入单号并触发回车事件
   ↓
3. 系统根据单号查询数据库
   ↓
4. 根据订单状态决定跳转或提示
   ↓
5. 完成操作
```

## 使用场景

### 场景1：快速入库
1. 供应商送货时，打印出库单
2. 仓库管理员使用扫描器扫描入库单条形码
3. 系统自动跳转到入库页面
4. 确认商品信息后，点击"入库"按钮完成入库

### 场景2：快速出库
1. 打印出库单
2. 拣货人员使用扫描器扫描出库单条形码
3. 系统自动跳转到出库页面
4. 确认拣货信息后，点击"出库"按钮完成出库

### 场景3：订单查询
1. 扫描已完成的订单条形码
2. 系统自动在列表中定位并显示该订单
3. 可以查看订单详情和历史记录

## 注意事项

1. **条形码扫描器配置：** 确保条形码扫描器已配置为自动回车模式
2. **权限要求：** 需要 `wms:receipt:all` 或 `wms:shipment:all` 权限
3. **网络连接：** 需要确保网络连接正常，以便查询订单信息
4. **订单状态：** 只有待处理状态的订单才能进入编辑页面

## 常见问题

**Q: 扫描后没有反应？**
A: 请检查条形码扫描器是否已连接，并确认扫描器已配置为自动回车模式。

**Q: 提示"未找到订单"？**
A: 请确认扫描的是系统打印的条形码，并且该订单确实存在于系统中。

**Q: 为什么不能编辑已入库/出库的订单？**
A: 出于数据安全和业务规则考虑，已完成的订单不允许修改。如需修改，请联系系统管理员。

**Q: 可以手动输入单号吗？**
A: 可以，在"扫描条形码"输入框中手动输入单号后按回车键，效果与扫描条形码相同。

## 更新历史

- **2025-11-28:** 初始版本，支持入库单和出库单条形码扫描功能

